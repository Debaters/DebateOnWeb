(this.webpackJsonpdebater=this.webpackJsonpdebater||[]).push([[0],{195:function(e,t,n){},196:function(e,t,n){},520:function(e,t,n){"use strict";n.r(t);var r=n(116),a=n(3),c=n.n(a),i=n(179),o=n.n(i),s=n(187),d=n(531),p=n(530),u=n(185),j=n(69),b=n(8),l=(n(195),n(36)),f=n(9),O=n.n(f),x=n(20),h=n(44),m=n(45),v=n(84),g=n(180),y=n(188),w=n(70),A=(n(196),n(4));function C(e){var t,n=e.reply;return Object(A.jsxs)("div",(t={className:"reply"},Object(w.a)(t,"className","container"),Object(w.a)(t,"children",[Object(A.jsx)("div",{className:"writer",children:n.writerName}),Object(A.jsx)("div",{className:"content",children:n.content})]),t))}var N,I,S,k=function(e){var t=navigator.userAgent;return t.indexOf("Firefox")>-1?"Mozilla Firefox":t.indexOf("SamsungBrowser")>-1?"Samsung Internet":t.indexOf("Opera")>-1||t.indexOf("OPR")>-1?"Opera":t.indexOf("Trident")>-1?"Microsoft Internet Explorer":t.indexOf("Edge")>-1?"Microsoft Edge":t.indexOf("Chrome")>-1?"Google Chrome or Chromium":t.indexOf("Safari")>-1?"Apple Safari":"unknown"},q=n(12),K=n(29),$=n.n(K),E=function(e){var t=Object(a.useState)(null),n=Object(q.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){(function(){var e=Object(x.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("/graphql",{query:"\n                                query ($id:String!){\n                                    debate(id:$id){\n                                        description\n                                        creatorName\n                                    }\n                            }",variables:{id:t}},{headers:{Accept:"application/json","Api-Key":"demoKeyOfApi","Content-Type":"application/json"}});case 2:n=e.sent,r=n.data.data,c(r.debate);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(e.roomId)}),[]),Object(A.jsx)(a.Fragment,{children:Object(A.jsx)("div",{children:r&&Object(A.jsxs)("div",{children:["creator : ",r.creatorName," ",Object(A.jsx)("br",{}),"subject : ",r.description]})})})},T=function(e){var t=Object(a.useState)(null),n=Object(q.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){(function(){var e=Object(x.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("/graphql",{query:"\n                                query ($id:String!){\n                                        debate(id:$id){\n                                            title\n                                        }\n                                }",variables:{id:t}},{headers:{Accept:"application/json","Api-Key":"demoKeyOfApi","Content-Type":"application/json"}});case 2:n=e.sent,r=n.data.data,c(r.debate);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(e.roomId)}),[]),Object(A.jsx)(a.Fragment,{children:Object(A.jsx)("div",{children:r&&Object(A.jsx)("div",{children:Object(A.jsx)("h1",{children:r.title})})})})},D=(c.a.Component,n(215),function(){var e=Object(a.useState)([]),t=Object(q.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(q.a)(c,2),o=i[0],s=i[1],d=Object(b.g)().state.debaterId;Object(a.useEffect)((function(){p(d),j()}),[]);var p=function(){var e=Object(x.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("/graphql",{query:" \n                            query ($id:String!){\n                                getComments(debateId:$id, offset:0, size:20){\n                                    content\n                                    writerName\n                                    debateId\n                            }\n                        }",variables:{id:t}},{headers:{Accept:"application/json","Api-Key":"demoKeyOfApi","Content-Type":"application/json"}});case 2:n=e.sent,null==(a=n.data).data.getComments.content&&"undefined"==a.data.getComments.content&&""==a.data.getComments.content||r(a.data.getComments);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(x.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("/graphql",{query:"mutation addComment($debateId:String!, $content:String!, $writerName:String!){\n                                addComment(\n                                    debateId:$debateId,\n                                    comment:{\n                                        debateId:$debateId,\n                                        content:$content,\n                                        writerName:$writerName\n                                    }\n                                )\n                            }",variables:{debateId:t,content:n,writerName:r}},{headers:{Accept:"application/json","Api-Key":"demoKeyOfApi","Content-Type":"application/json"}});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),j=function(){var e=Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.a.post("/graphql",{query:"\n                    query{\n                        getNickname\n                    }\n                    "},{headers:{Accept:"application/json","Api-Key":"demoKeyOfApi","Content-Type":"application/json"}});case 2:t=e.sent,n=t.data,s(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=document.querySelector("#new-reply-content").value;r([].concat(Object(l.a)(n),[{writerName:o.getNickname,content:e}])),u(d,e,o.getNickname),document.getElementById("new-reply-content").value=" "};return Object(A.jsx)("div",{id:"Debate_Room",children:Object(A.jsxs)("div",{children:[Object(A.jsxs)("div",{id:"titleBox",children:[Object(A.jsx)(T,{roomId:d}),Object(A.jsx)(E,{roomId:d})]}),Object(A.jsx)("div",{id:"replys",children:n.length>0?n.map((function(e){return Object(A.jsx)(C,{reply:e})})):Object(A.jsx)("h1",{id:"noneReply",children:"\ub4f1\ub85d\ub41c \uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})}),Object(A.jsxs)("div",{id:"writing-area",children:[Object(A.jsx)("textarea",{id:"new-reply-content"}),Object(A.jsx)("button",{id:"submit-new-reply",onClick:function(e){f()},children:"\uc785\ub825"})]})]})})}),B=n(88),F=n(89);var M=F.a.div(N||(N=Object(B.a)(["\n  width: 80vw;\n"]))),R=F.a.div(I||(I=Object(B.a)(["\n  height: 120px;\n  min-width: 300px;\n  border-radius: 5px;\n  box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px,\n    rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px,\n    rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;\n  margin: 20px 0px 15px;\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  cursor: pointer;\n"]))),z=F.a.div(S||(S=Object(B.a)(["\n  visibility: hidden;\n  height: 30px;\n"]))),P=function(){var e=Object(a.useState)(0),t=Object(q.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),i=Object(q.a)(c,2),o=i[0],s=i[1],d=Object(a.useState)(!1),p=Object(q.a)(d,2),u=p[0],j=p[1],f=Object(a.useRef)(null),h=function(){var e=Object(x.a)(O.a.mark((function e(){var t,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/graphql",{body:'{"query":"{homeDebates(offset:'.concat(n,',size:6){id title creatorName}}"}'),headers:{Accept:"application/json","Api-Key":"demoKeyOfApi","Content-Type":"application/json"},method:"POST"});case 2:return t=e.sent,console.log("1, is it workin?"),e.next=6,t.json();case 6:r=e.sent,a=r.data.homeDebates,s((function(e){return[].concat(Object(l.a)(e),Object(l.a)(a))})),console.log("2, set true"),j(!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){h()}),[n]),Object(a.useEffect)((function(){!function(){if(u){console.log("offset not changed but workin?");var e=new IntersectionObserver((function(e){0!==o.length&&e[0].isIntersecting&&(console.log("3, \uad50\ucc28"),r((function(e){return e+1})))})),t=f.current;e.observe(t),console.log(o)}}()}),[u]);var m=Object(b.f)();return Object(A.jsxs)(M,{children:[o&&o.map((function(e){return Object(A.jsxs)(R,{onClick:function(){return t=e.id,void m.push({pathname:"/routing",state:{debaterId:t}});var t},children:[Object(A.jsx)("h3",{children:e.title}),Object(A.jsx)("p",{children:e.creatorName})]},e.id)})),Object(A.jsx)(z,{ref:f}),Object(A.jsx)("button",{onClick:function(){return console.log(o)},children:"2"})]})};var J=function(){return Object(A.jsxs)(j.a,{children:[Object(A.jsx)("header",{className:"header",children:Object(A.jsx)("div",{children:Object(A.jsx)(j.b,{to:"/DebateOnWeb",children:"Debaters world"})})}),Object(A.jsx)("div",{className:"main",children:Object(A.jsxs)(b.c,{children:[Object(A.jsx)(b.a,{exact:!0,path:"/DebateOnWeb",children:Object(A.jsx)(P,{})}),Object(A.jsx)(b.a,{exact:!0,path:"/routing",children:Object(A.jsx)(D,{})})]})}),Object(A.jsx)("footer",{className:"footer"})]})},W=n(529),G=Object(u.a)((function(e,t){var n=t.headers;return{headers:Object(r.a)(Object(r.a)({},n),{},{Accept:"application/json","Api-Key":"demoKeyOfApi","Content-Type":"application/json"})}})),Q=Object(s.a)({uri:"/graphql"}),_=new d.a({typePolicies:{Query:{fields:{homeDebates:Object(W.a)()}}}});new p.a({uri:"http://debaters.world:9090",cache:_,link:G.concat(Q)});o.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(J,{})}),document.getElementById("root"))}},[[520,1,2]]]);
//# sourceMappingURL=main.cb06bf0f.chunk.js.map